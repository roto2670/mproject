(function(t){function e(e){for(var s,a,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)a=r[d],i[a]&&p.push(i[a][0]),i[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(s=!1)}s&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var s={},i={app:0},o=[];function a(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=s,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("64a9"),i=n.n(s);i.a},"07c7":function(t,e,n){},1985:function(t,e,n){"use strict";var s=n("7130"),i=n.n(s);i.a},"1a3f":function(t,e,n){},"22de":function(t,e,n){"use strict";var s=n("25be"),i=n.n(s);i.a},"25be":function(t,e,n){},"2d9d":function(t,e,n){},3495:function(t,e,n){"use strict";var s=n("ddf0"),i=n.n(s);i.a},"48e6":function(t,e,n){},"4f95":function(t,e,n){"use strict";var s=n("906e"),i=n.n(s);i.a},"56d7":function(t,e,n){"use strict";n.r(e);var s={};n.r(s),n.d(s,"websocketConnect",function(){return Gt}),n.d(s,"websocketDisconnect",function(){return $t}),n.d(s,"subscribe",function(){return Yt}),n.d(s,"unsubscribe",function(){return jt}),n.d(s,"updateData",function(){return Wt}),n.d(s,"getInfo",function(){return Ft}),n.d(s,"getMapFile",function(){return zt}),n.d(s,"getSpeakers",function(){return Ht}),n.d(s,"getAlarmList",function(){return Vt}),n.d(s,"setAlarmList",function(){return qt});n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=n("415c"),a=n.n(o),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Main")],1)},c=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-container",attrs:{id:"main"}},[n("Top",{attrs:{selectedType:t.isTopPressedType},on:{"select-top-button":t.handleTopButton}}),t.isShowingTopList("filter")||t.isShowingTopList("broadcast")?n("GroupList",{attrs:{groupList:t.getTagList,checkList:t.filterList,type:t.isTopPressedType},on:{"select-checkbox":t.handleChangedCheckbox,"select-button":t.handleBroadCast}}):t._e(),t.isShowingTopList("sound_set_up")?n("SoundList",{attrs:{list:t.alarmList},on:{"select-add":t.handleSoundAdd,"select-remove":t.handleSoundRemove}}):t._e(),t.isShowingInfoWindow?n("InfoWindow",{attrs:{isForGroup:t.isForGroup,item:t.infoWindowItem},on:{"select-close":t.handleInfoWindowClose}}):t._e(),t.isShowingContextMenu?n("ContextMenu",{attrs:{speaker:t.contextMenuItem,position:t.markerPosition},on:{"select-menu":t.handleSelectContextMenu}}):t._e(),n("div",{staticClass:"map-container",attrs:{id:t.id}})],1)},u=[],d=(n("55dd"),n("ac6a"),n("ec60")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-container",attrs:{id:"top"}},[n("div",{staticClass:"button-frame"},t._l(t.types,function(e){return n("TopButton",{key:e,attrs:{selectedType:t.selectedType,type:e},on:{"select-button":t.handleSelectedButton}})}),1)])},h=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isImageButton?n("div",{staticClass:"button-panel",class:t.type,attrs:{id:"top-button"},on:{click:t.handleSelectedButton}},[n("div",{staticClass:"button-image",class:t.classObj})]):n("div",{staticClass:"text-button-panel",class:{pressed:t.pressed},attrs:{id:"top-button"},on:{click:t.handleSelectedButton}},[n("div",{staticClass:"text-button-image-panel"},[n("div",{staticClass:"text-button-image",class:t.classObj})]),n("div",{staticClass:"text-button-label",class:{pressed:t.pressed}},[n("div",{staticClass:"text-button",class:{pressed:t.pressed}},[t._v(t._s(t.buttonText))])])])},m=[],T={name:"TopButton",props:{type:{type:String,required:!0},selectedType:{type:String}},methods:{handleSelectedButton:function(){this.$emit("select-button",this.type)}},computed:{isImageButton:function(){return this.type===window.CONSTANTS.TOP_BUTTON_TYPE.PLUS||this.type===window.CONSTANTS.TOP_BUTTON_TYPE.MINUS||this.type===window.CONSTANTS.TOP_BUTTON_TYPE.FILTER},buttonText:function(){var t="";return this.type===window.CONSTANTS.TOP_BUTTON_TYPE.SOUND_SET_UP?t="SOUND SET-UP":this.type===window.CONSTANTS.TOP_BUTTON_TYPE.BROADCAST&&(t="BROADCAST"),t},pressed:function(){return this.type!==window.CONSTANTS.TOP_BUTTON_TYPE.PLUS&&this.type!==window.CONSTANTS.TOP_BUTTON_TYPE.MINUS&&this.selectedType===this.type},classObj:function(){var t={};return t[this.type]=!0,t["".concat(this.type,"-pressed")]=this.pressed,t}}},v=T,S=(n("4f95"),n("2877")),y=Object(S["a"])(v,f,m,!1,null,null,null),g=y.exports,C={name:"top",components:{TopButton:g},props:{selectedType:{type:String}},data:function(){return{types:window.CONSTANTS.TOP_BUTTON_TYPE}},methods:{handleSelectedButton:function(t){this.$emit("select-top-button",t)}}},k=C,w=(n("599a"),Object(S["a"])(k,p,h,!1,null,null,null)),b=w.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group-container",class:t.type,attrs:{id:"group-list"}},[n("div",{staticClass:"group-frame"},t._l(t.groupList,function(e,s){return n("GroupItem",{key:s,attrs:{item:e,filterList:t.checkList,type:t.type},on:{"select-checkbox":t.handleChangedCheckBox}})}),1),t.isShowingButton?n("div",{staticClass:"group-button-frame",on:{click:t.handleSelectButton}},[n("div",{staticClass:"group-button-panel",class:{deactive:t.isEmpty}},[n("div",{staticClass:"group-button-text"},[t._v(t._s(t.buttonText))])])]):t._e()])},O=[],L=(n("6762"),n("2fdb"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group-item-panel",attrs:{id:"group-item"}},[n("div",{staticClass:"group-item-wrapper"},[n("label",{staticClass:"group-item-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"group-item-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:[function(e){var n=t.checked,s=e.target,i=!!s.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);s.checked?a<0&&(t.checked=n.concat([o])):a>-1&&(t.checked=n.slice(0,a).concat(n.slice(a+1)))}else t.checked=i},t.handleSelectedCheckbox]}}),t._v(t._s(t.getItemName)+"\n        ")])])])}),N=[],x={name:"GroupItem",props:{item:{type:String},type:{type:String},filterList:{type:Array,default:[]}},data:function(){return{checked:!1}},computed:{getItemName:function(){return this.item<0?"All Group":"Group - ".concat(this.item)}},methods:{handleSelectedCheckbox:function(){this.$emit("select-checkbox",this.item,this.checked)},setCheckBox:function(){this.type===window.CONSTANTS.TOP_BUTTON_TYPE.FILTER?this.checked=!this._.includes(this.filterList,this.item):this.checked=!1}},created:function(){this.setCheckBox()},watch:{type:function(){this.setCheckBox()}}},A=x,P=(n("bb41"),Object(S["a"])(A,L,N,!1,null,null,null)),I=P.exports,M={name:"GroupList",components:{GroupItem:I},props:{groupList:{type:Array,default:[]},checkList:{type:Array,default:[]},type:{type:String}},data:function(){return{allGroupKey:"-1",broadcastList:[]}},methods:{handleChangedCheckBox:function(t,e){this.type===window.CONSTANTS.TOP_BUTTON_TYPE.FILTER?this.$emit("select-checkbox",t,e):this._.includes(this.broadcastList,t)?this.broadcastList=this._.without(this.broadcastList,t):this.broadcastList.push(t)},handleSelectButton:function(t){t.stopPropagation(),this.$emit("select-button",this.broadcastList)}},computed:{isShowingButton:function(){return this.type===window.CONSTANTS.TOP_BUTTON_TYPE.BROADCAST},isEmpty:function(){return this._.isEmpty(this.broadcastList)},buttonText:function(){return this.isEmpty?"SELECT YOUR GROUP":"START BROADCAST"}},created:function(){console.log("Create filter list ",this.groupList)}},B=M,U=(n("3495"),Object(S["a"])(B,E,O,!1,null,null,null)),R=U.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sound-container",attrs:{id:"soundlist"}},[n("div",{staticClass:"sound-frame"},[t.isEmpty?n("div",{staticClass:"no-sound-panel"},[n("div",{staticClass:"no-sound-text"},[t._v("THERE IS NO SOUND.")]),n("div",{staticClass:"no-sound-image-panel"},[n("div",{staticClass:"no-sound-image",on:{click:t.selectedAddSound}})]),n("div",{staticClass:"no-sound-text"},[t._v("PLEASE ADD A SOUND.")])]):n("div",{staticClass:"list-panel"},[n("div",{staticClass:"list-wrapper"},t._l(t.list,function(e){return n("SoundItem",{key:e,attrs:{id:e},on:{"select-checkbox":t.handleSelectCheckbox}})}),1),n("div",{staticClass:"sound-button-wrapper"},[n("div",{staticClass:"sound-button-panel",on:{click:t.selectedAddSound}},[n("div",{staticClass:"sound-button-text"},[t._v("ADD NEW")])]),n("div",{staticClass:"sound-button-panel right",class:{deactive:t.deactive},on:{click:t.selectedRemove}},[n("div",{staticClass:"sound-button-text"},[t._v("REMOVE")])])])])])])},G=[],$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sound-item-panel",attrs:{id:"sound-item"}},[n("div",{staticClass:"sound-item-wrapper"},[n("label",{staticClass:"sound-item-label"},[n("input",{staticClass:"sound-item-checkbox",attrs:{type:"checkbox"},on:{change:t.handleSelectedCheckbox}}),t._v(t._s(t.itemName)+"\n        ")])])])},Y=[],j={name:"SoundItem",props:{id:{type:String}},computed:{itemName:function(){return"Sound - ".concat(this.id)}},methods:{handleSelectedCheckbox:function(){this.$emit("select-checkbox",this.id)}}},W=j,F=(n("6050"),Object(S["a"])(W,$,Y,!1,null,null,null)),z=F.exports,H={name:"SoundList",components:{SoundItem:z},props:{list:{type:Array}},data:function(){return{selectedList:[]}},methods:{selectedAddSound:function(){this.$emit("select-add")},selectedRemove:function(){this.$emit("select-remove",this.selectedList),this.selectedList=[]},handleSelectCheckbox:function(t){this._.includes(this.selectedList,t)?this.selectedList=this._.without(this.selectedList,t):this.selectedList.push(t)}},computed:{isEmpty:function(){return this._.isEmpty(this.list)},deactive:function(){return this._.isEmpty(this.selectedList)}},created:function(){}},V=H,q=(n("d86f"),Object(S["a"])(V,D,G,!1,null,null,null)),Z=q.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info-container",attrs:{id:"infowindow"}},[n("div",{staticClass:"info-left-panel"},[t.isForGroup?n("div",{staticClass:"group-speaker-panel"},[n("div",{staticClass:"group-text-wrapper"},[n("div",{staticClass:"info-title"},[t._v("SPEAKERS")]),n("div",{staticClass:"group-wrapper"},t._l(t.item,function(e,s){return n("div",{key:s,staticClass:"info-text"},[t._v(t._s("Group - "+e))])}),0)]),n("div",{staticClass:"group-list-panel"},[n("div",{staticClass:"group-list-title"},[n("div",{staticClass:"group-list-text"},[t._v(t._s(t.speakersInGroup.length+" speakers"))])]),n("div",{staticClass:"group-list-wrapper"},t._l(t.speakersInGroup,function(e,s){return n("div",{key:s,staticClass:"speaker-list-panel"},[n("div",{staticClass:"speaker-list-text"},[t._v(t._s(e.name))])])}),0)])]):n("div",{staticClass:"info-speaker-panel"},[n("div",{staticClass:"info-text-wrapper"},[n("div",{staticClass:"info-title"},[t._v("SPEAKER")]),n("div",{staticClass:"info-text"},[t._v(t._s(t.item.name))]),n("div",{staticClass:"info-title group"},[t._v("GROUP")]),n("div",{staticClass:"info-text"},[t._v(t._s(t.getGroupName))])]),t._m(0)])]),n("div",{staticClass:"info-right-panel"},[n("PlayList",{attrs:{list:t.playList}})],1),n("div",{staticClass:"info-close-button",on:{click:t.handleSelectCloseButton}})])},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alarm-image-panel"},[n("div",{staticClass:"alarm-image"})])}],K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alarm-container",attrs:{id:"playlist"}},[n("div",{staticClass:"alarm-list-frame"},[n("div",{staticClass:"alarm-list-wrapper"},t._l(t.list,function(e,s){return n("div",{key:s,staticClass:"alarm-list-panel",class:{selected:t.isSelectedItem(e)},on:{click:function(n){return t.handleSelectedItem(e)}}},[n("div",{staticClass:"alarm-name-panel"},[n("div",{staticClass:"alarm-name"},[t._v(" "+t._s(e.id))])])])}),0)]),t._m(0)])},X=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alarm-play-frame"},[n("div",{staticClass:"play-icon-panel"},[n("div",{staticClass:"icon-image play-icon"})]),n("div",{staticClass:"volume-down-panel"},[n("div",{staticClass:"icon-image volume-down"})]),n("div",{staticClass:"volume-up-panel"},[n("div",{staticClass:"icon-image volume-up"})])])}],tt={name:"PlayList",props:{list:{type:Array,detault:[]}},data:function(){return{selectedItem:null}},methods:{isSelectedItem:function(t){return!!this.selectedItem&&this.selectedItem.id===t.id},handleSelectedItem:function(t){this.selectedItem&&this.selectedItem.id===t.id?this.selectedItem=null:this.selectedItem=t,console.log("selected item",t)}},created:function(){console.log("create play list ",this.list)}},et=tt,nt=(n("6880"),Object(S["a"])(et,K,X,!1,null,null,null)),st=nt.exports,it={name:"InfoWindow",components:{PlayList:st},props:{isForGroup:{type:Boolean},item:{required:!0}},data:function(){return{playList:[],speakersInGroup:[]}},methods:{handleGroupList:function(){var t=this,e=this.$store.getters.getSpeakers;this._.forEach(e,function(e){var n=t._.first(e.tags);t._.includes(t.item,n)&&t.speakersInGroup.push(e)})},handleSelectItem:function(t){var e=this.playList[t];console.log(e)},handleSelectCloseButton:function(){this.$emit("select-close")}},computed:{getGroupName:function(){var t=this._.first(this.item.tags);return"Group - ".concat(t)}},created:function(){this.isForGroup&&this.handleGroupList(),this.playList=this.$store.getters.getAlarmList}},ot=it,at=(n("ecf3"),Object(S["a"])(ot,Q,J,!1,null,null,null)),rt=at.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"menu-container",style:t.styleOption,attrs:{id:"contextmenu"}},[t.isSelected?n("MenuItem",{attrs:{speaker:t.speaker},on:{"select-menu":t.handleSelectMenu}}):t._e()],1)},lt=[],ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"menuitem"}},[n("div",{staticClass:"menu-top-frame"},[n("div",{staticClass:"text-wrapper"},[n("div",{staticClass:"type-text"},[t._v("Speaker")]),n("div",{staticClass:"name-text"},[t._v(t._s(t.speaker.name))])])]),n("div",{staticClass:"menu-bottom-frame"},t._l(t.zoneType,function(e,s){return n("div",{key:s,staticClass:"menu-panel",on:{click:function(n){return t.handleSelectMenu(e)}}},[n("div",{staticClass:"menu-text"},[t._v(t._s(e+" Zone"))])])}),0)])},dt=[],pt={name:"MenuItem",props:{speaker:{type:Object,required:!0}},data:function(){return{zoneType:[]}},methods:{handleSelectMenu:function(t){var e=t.toLowerCase();this.$emit("select-menu",e)}},created:function(){this._.isEmpty(this.speaker.tags)?this.zoneType=["Set"]:this.zoneType=["Change","Remove"]}},ht=pt,ft=(n("1985"),Object(S["a"])(ht,ut,dt,!1,null,null,null)),mt=ft.exports,_t={name:"ContextMenu",components:{MenuItem:mt},props:{speaker:{type:Object,required:!0},position:{type:Object,required:!0}},data:function(){return{selectedType:"",top:0,left:0}},methods:{handleSelectMenu:function(t){t.toLowerCase()},setContextMenuPosition:function(){var t=this.$refs.container;if(t){var e=t.clientWidth,n=t.clientHeight;this.top=Math.round(this.position.y-n+40),this.left=Math.round(this.position.x-e/2)}}},computed:{isSelected:function(){return!this.selectedType},styleOption:function(){return{top:"".concat(this.top,"px"),left:"".concat(this.left,"px")}}},mounted:function(){this.setContextMenuPosition()},watch:{position:function(){this.setContextMenuPosition()}}},Tt=_t,vt=(n("749f"),Object(S["a"])(Tt,ct,lt,!1,null,null,null)),St=vt.exports,yt={name:"Main",components:{Top:b,GroupList:R,SoundList:Z,InfoWindow:rt,ContextMenu:St},data:function(){return{id:"map",info:{},map:null,paLayers:{},polygonLayers:{},zoomLevel:0,markers:{},polygons:{},speakerByTags:{},infoWindowItem:null,contextMenuItem:null,markerPosition:null,checkInterval:null,isWebsoketConnected:!1,groupList:[],filterList:[],isForGroup:!1,isTopPressedType:"",alarmList:[]}},methods:{_initLoadMap:function(){var t=this;this.services.getMapFile(function(e){t.map=new d["c"](t.id,{center:[90,50],zoom:5,maxZoom:7,minZoom:4,maxExtent:new d["a"](0,0,180,80),zoomAnimation:!0,zoomInCenter:!1,panAnimation:!1,dragRotate:!1,dragPitch:!1,drgaRotatePitch:!1,touchGesture:!1,touchZoom:!1,touchRotate:!1,touchPitch:!1,touchZoomRotate:!1,doubleClickZoom:!1,baseLayer:new d["b"]("base",[{url:e,extent:[0,0,180,80],opactiy:1}],{opactiy:1})}),t._registerMapHandler()})},_registerMapHandler:function(){var t=this;this.map&&(this.map.once("baselayerload",function(){t.zoomLevel=t.map.getZoom()/11*50,t._getSpeakers(),t._getAlarmList()}),this.map.on("zoomend moveend",function(e){t.zoomLevel=t.map.getZoom()/11*50,t._setContextMenuPosition()}),this.map.on("click",function(e){t.infoWindowItem=null,t.contextMenuItem=null,t.isTopPressedType=""}))},_registerItemsByTag:function(t){this._.has(this.speakerByTags,t)||(this.speakerByTags[t]=[]),this._.has(this.paLayers,t)||(this.paLayers[t]=new d["f"]("pa".concat(t)).addTo(this.map),this.paLayers[t].setZIndex(1),this.polygonLayers[t]=new d["f"]("polygon".concat(t)).addTo(this.map))},_getSpeakers:function(){var t=this;this.services.getSpeakers(function(e){t._.forEach(e,function(e){var n=t._.first(e.tags);t.$store.commit("addSpeaker",e),t._registerItemsByTag(n),t._drawSpeaker(e)}),t._drawPolygons()})},_drawSpeakers:function(t){var e=this;this._.forEach(t,function(t){e._drawSpeaker(t)})},_drawSpeaker:function(t){var e=this,n=t.custom.map_location,s=this._.first(t.tags),i="".concat(window.CONSTANTS.URL.BASE_IMG,"icon-pa-round.svg"),o=new d["d"]([n.x,n.y],{symbol:{markerFile:i,markerWidth:this.zoomLevel,markerHeight:this.zoomLevel,markerDy:10},draggable:!0});o.addTo(this.paLayers[s]),this.speakerByTags[s].push(t.id),this.markers[t.id]=o,o.on("dragend",function(n){n.domEvent.stopPropagation();var s=e._.first(t.tags),i=o._coordinates;t.custom.map_location={x:i.x,y:i.y},e._updatePolygon(s)}),o.on("click",function(n){n.domEvent.stopPropagation(),e.infoWindowItem=t,e.contextMenuItem=null,e.isForGroup=!1}),o.on("contextmenu",function(n){n.domEvent.stopPropagation(),e.infoWindowItem=null,e.contextMenuItem=t,e._setContextMenuPosition()})},_drawPolygons:function(){var t=this;this._.forEach(this.speakerByTags,function(e,n){t._drawPolygon(e,n)})},_drawPolygon:function(t,e){var n=this._sortLocationList(t),s=new d["e"](n,{symbol:{polygonFill:"rgb(255, 75, 25)",polygonOpacity:.5,lineColor:"rgb(255, 75, 25)",lineWidth:1}});s.addTo(this.polygonLayers[e]),this.polygons[e]=s},_removePolygon:function(t){var e=this.polygons[t];e&&(e.hide(),delete this.polygons[t])},_updatePolygon:function(t){var e=this.polygons[t],n=this.speakerByTags[t];if(e){var s=this._sortLocationList(n);e.setCoordinates(s)}},_getAlarmList:function(){var t=this;this.services.getAlarmList(function(e){t._.forEach(e,function(e){t.alarmList.push(e.id),t.$store.commit("addAlarmData",e)})})},_zoomIn:function(){this.map&&this.map.zoomIn(7)},_zoomOut:function(){this.map&&this.map.zoomOut(6)},_sortLocationList:function(t){var e=this,n=[],s=[],i=0,o=0,a=0,r=0,c={};return this._.forEach(t,function(t,s){var c=e.$store.getters.getSpeaker(t),l=c.custom.map_location;0===s?(i=l.x,o=l.x,a=l.y,r=l.y):(l.x<i&&(i=l.x),l.x>o&&(o=l.x),l.y<a&&(a=l.y),l.y>r&&(r=l.y)),n.push(l)}),c={x:i+(o-i)/2,y:a+(r-a)/2},this._.forEach(n,function(t,n){t.angle=Math.acos((t.x-c.x)/e._lineDistance(c,t)),t.y>c.y&&(t.angle=Math.PI+Math.PI-t.angle)}),n=n.sort(function(t,e){return t.angle-e.angle}),this._.forEach(n,function(t){s.push([t.x,t.y])}),s},_lineDistance:function(t,e){var n=0,s=0;return n=e.x-t.x,n*=n,s=e.y-t.y,s*=s,Math.sqrt(n+s)},_setContextMenuPosition:function(){if(this.isShowingContextMenu){var t=this.markers[this.contextMenuItem.id],e=t._coordinates,n=this.map.coordinateToContainerPoint(e,this.zoomLevel);this.markerPosition={x:n.x,y:n.y}}},_handleFilterGroup:function(t,e){e?(this.paLayers[t].show(),this.polygonLayers[t].show(),this.filterList=this._.without(this.filterList,t)):(this.paLayers[t].hide(),this.polygonLayers[t].hide(),this.filterList.push(t))},isShowingTopList:function(t){return this.isTopPressedType===t},handleTopButton:function(t){this.infoWindowItem=null,this.isTopPressedType===t?this.isTopPressedType="":this.isTopPressedType=t,t===window.CONSTANTS.TOP_BUTTON_TYPE.PLUS?(this._zoomIn(),this._setContextMenuPosition()):t===window.CONSTANTS.TOP_BUTTON_TYPE.MINUS?(this._zoomOut(),this._setContextMenuPosition()):t===window.CONSTANTS.TOP_BUTTON_TYPE.FILTER||(t===window.CONSTANTS.TOP_BUTTON_TYPE.BROADCAST?this.isForGroup=!0:window.CONSTANTS.TOP_BUTTON_TYPE.SOUND_SET_UP)},handleChangedCheckbox:function(t,e){this._handleFilterGroup(t,e)},handleBroadCast:function(t){this.infoWindowItem=t,this.isTopPressedType=""},handleInfoWindowClose:function(){this.infoWindowItem=null},handleSelectContextMenu:function(t){},handleSoundAdd:function(){},handleSoundRemove:function(t){var e=this;this._.forEach(t,function(t){e.$store.commit("removeAlarmData",t),e.alarmList=e._.without(e.alarmList,t)})},websocketConnect:function(){var t=this,e=window.location.hostname;window.CONSTANTS.IS_DEV&&(e="192.168.0.15"),this.services.websocketConnect(e,5555,function(){console.log("Connect with websocket"),t.isWebsocketConnected=!0,t.stopInterval()},function(){console.warn("Disconnect with websocket"),t.isWebsocketConnected=!1,t.startInterval()},function(){console.error("Error")})},startInterval:function(){var t=this;this.checkInterval||(this.checkInterval=setInterval(function(){t.websocketConnect()},1e4))},stopInterval:function(){this.checkInterval&&clearInterval(this.checkInterval),this.checkInterval=null}},computed:{getTagList:function(){return this._.keys(this.paLayers)},isShowingInfoWindow:function(){return!this._.isEmpty(this.infoWindowItem)},isShowingContextMenu:function(){return!this._.isEmpty(this.contextMenuItem)}},mounted:function(){this._initLoadMap()},created:function(){var t=this;console.log("Create Main vue"),this.services.getInfo(function(e){t._.isObject(e)&&(console.log("Succeed to get info ",e),t.info=e,t.websocketConnect(),t.startInterval())})}},gt=yt,Ct=(n("22de"),Object(S["a"])(gt,l,u,!1,null,null,null)),kt=Ct.exports,wt={components:{Main:kt}},bt=wt,Et=(n("034f"),Object(S["a"])(bt,r,c,!1,null,null,null)),Ot=Et.exports,Lt=n("8c4f");i["a"].use(Lt["a"]);var Nt=new Lt["a"]({mode:"history",base:"/",routes:[]}),xt=n("2f62");i["a"].use(xt["a"]);var At=new xt["a"].Store({state:{speakers:{},alarmList:{}},getters:{getSpeakers:function(t){return _.values(t.speakers)},getSpeaker:function(t){return function(e){return t.speakers[e]}},getAlarmList:function(t){return _.values(t.alarmList)},getAlarmData:function(t){return function(e){return t.alarmList[e]}}},mutations:{addSpeakers:function(t,e){_.forEach(e,function(e){t.speakers[e.id]=e})},addSpeaker:function(t,e){t.speakers[e.id]=e},removeSpeaker:function(t,e){_.has(t.speakers,e)&&delete t.speakers[e]},removeSpeakers:function(t){_.forEach(t.speakers,function(e,n){delete t.speakers[n]}),t.speakers={}},updateSpeaker:function(t,e){_.has(t.speakers,e.id)&&(t.speakers[e.id]=e)},addAlarmList:function(t,e){_.forEach(e,function(e){t.alarmList[e.id]=e})},addAlarmData:function(t,e){t.alarmList[e.id]=e},removeAlarmList:function(t){_.forEach(t.alarmList,function(e,n){delete t.alarmList[n]}),t.alarmList={}},removeAlarmData:function(t,e){_.has(t.alarmList,e)&&delete t.alarmList[e]}},actions:{}}),Pt=(n("d1a0"),n("6b54"),n("bc3a")),It=n.n(Pt),Mt=n("d225"),Bt=n("b0b4"),Ut=(n("7e3c"),function(){function t(){Object(Mt["a"])(this,t),this._handler={},this._subscribeHandlers=null,this.socket=null,this.clientId=null}return Object(Bt["a"])(t,[{key:"connect",value:function(t,e,n,s,i){var o=this;this.socket=new WebSocket("ws://".concat(t,":").concat(e,"/ws")),this.socket.onopen=n,this.socket.onerror=i,this.socket.onclose=s,this.socket.onmessage=function(t){o._onMessage(t)}}},{key:"disconnect",value:function(){this.socket&&this.socket.close()}},{key:"send",value:function(t){this.socket&&this.socket.send(JSON.stringify(t))}},{key:"call",value:function(t,e){var n=this._createRequestId();_.extend(t,{i:n}),this._registerHandler(n,e),this.send(t)}},{key:"subscribe",value:function(t,e){var n=this;this.call({e:window.CONSTANTS.REQUEST_TYPE.SUBSCRIBE,kwargs:{client_kind:"P",internal:t},_t:new Date/1e3},function(t){n.clientId=t}),this._subscribeHandlers=e}},{key:"unsubscribe",value:function(){this.call({e:window.CONSTANTS.REQUEST_TYPE.UNSUBSCRIBE,kwargs:{client_id:this.clientId,client_kind:"P"},_t:new Date/1e3},function(){}),console.log("unsubscribe is called"),this._subscribeHandlers=null}},{key:"_createRequestId",value:function(){return Math.random().toString(36).substr(2,5)}},{key:"_registerHandler",value:function(t,e){this._handler[t]||(this._handler[t]=e)}},{key:"_authenticate",value:function(){if(this.socket){var t={};t.ident=_createRequestId(),t.value={name:"authenticate",args:"key",namespace:""};var e=JSON.stringify(t);this.send(e)}}},{key:"_onOpen",value:function(t){1===this.readyState&&this._authenticate()}},{key:"_onClose",value:function(t){}},{key:"_onMessage",value:function(t){var e=null;try{e=JSON.parse(t.data)}finally{e&&(_.has(e,"i")?this._handleResponse(e):this._handleEvent(e))}}},{key:"_handleResponse",value:function(t){var e=this._handler[t.i];e&&(e(t.v),delete this._handler[t.i])}},{key:"_handleEvent",value:function(t){if(t)switch(t.e){case window.CONSTANTS.EVENT_TYPE.ADDED:this._subscribeHandlers.added(t);break;case window.CONSTANTS.EVENT_TYPE.UPDATED:this._subscribeHandlers.updated(t);break;case window.CONSTANTS.EVENT_TYPE.REMOVED:this._subscribeHandlers.removed(t);break;case window.CONSTANTS.EVENT_TYPE.UPDATE_ALARM_LIST:this._subscribeHandlers.updateAlarmList(t);break}}},{key:"_onError",value:function(t){console.log("Socket is error ",t)}}]),t}()),Rt=new Ut,Dt=function(){return new Date/1e3},Gt=function(t,e,n,s,i){Rt.connect(t,e,n,s,i)},$t=function(){Rt.disconnect()},Yt=function(t,e){Rt.subscribe(t,e)},jt=function(){Rt.unsubscribe()},Wt=function(t,e,n){Rt.call({e:window.CONSTANTS.REQUEST_TYPE.UPDATE_DATA,kwargs:{kind:e,data:t},_t:Dt()},n)},Ft=function(t){window.CONSTANTS.IS_DEV?t({interval:10,product_id:"mibsskec",stage:0,internal:!0}):It()({url:"".concat(window.CONSTANTS.URL.CONSOLE,"/dash/location/info"),method:"GET",responseType:"text"}).then(function(e){e.data?t(e.data):(console.warn("File is not exist"),t())}).catch(function(e){console.warn("Failed to get info ",e),t()})},zt=function(t){var e="".concat(window.CONSTANTS.URL.BASE_IMG,"map.png");It()({url:"".concat(window.CONSTANTS.URL.CONSOLE,"/dashboard/location/view"),method:"GET",responseType:"text"}).then(function(n){n.data?(console.log("Success to Get map image file",n.data),t("".concat(window.location.protocol,"//").concat(window.location.host).concat(n.data))):(console.warn("Sorry, Img file does not exist"),t(e))}).catch(function(n){console.warn("Failed to get map file ",n),t(e)})},Ht=function(t){window.CONSTANTS.IS_DEV?t(Zt()):Rt.call({e:window.CONSTANTS.REQUEST_TYPE.GET_DATA,kwargs:{kind:"speaker"},_t:Dt()},t)},Vt=function(t){window.CONSTANTS.IS_DEV?setTimeout(function(){t([{id:"abc"},{id:"def"},{id:"ghi"},{id:"jkl"},{id:"mno"}])},1500):Rt.call({e:window.CONSTANTS.REQUEST_TYPE.GET_ALARM_LIST,_t:Dt()},t)},qt=function(t,e){},Zt=function(){for(var t=[],e=0;e<15;e++){var n=Math.round(3*Math.random()),s=Math.round(Math.random()*(10+e)),i=Math.round(Math.random()*(10+e)),o={id:"aaabbb".concat(e),name:"speaker-".concat(e),tags:[n.toString()],custom:{map_location:{x:89.47265625+s,y:43.13771481219632+i}}};t.push(o)}return t};i["a"].config.productionTip=!1,i["a"].prototype.services=s,i["a"].use(a.a),new i["a"]({router:Nt,store:At,render:function(t){return t(Ot)}}).$mount("#app")},"599a":function(t,e,n){"use strict";var s=n("1a3f"),i=n.n(s);i.a},6050:function(t,e,n){"use strict";var s=n("48e6"),i=n.n(s);i.a},"64a9":function(t,e,n){},"64f9":function(t,e,n){},6880:function(t,e,n){"use strict";var s=n("8dbd"),i=n.n(s);i.a},7130:function(t,e,n){},"749f":function(t,e,n){"use strict";var s=n("07c7"),i=n.n(s);i.a},"8dbd":function(t,e,n){},"906e":function(t,e,n){},bb41:function(t,e,n){"use strict";var s=n("2d9d"),i=n.n(s);i.a},d1a0:function(t,e){window.CONSTANTS={IS_DEV:!0,URL:{CONSOLE:"",BASE_IMG:"static/imgs/"},TOP_BUTTON_TYPE:{PLUS:"plus",MINUS:"minus",FILTER:"filter",SOUND_SET_UP:"sound_set_up",BROADCAST:"broadcast"},EVENT_TYPE:{ADDED:"added",UPDATED:"updated",REMOVED:"removed",UPDATE_ALARM_LIST:"update_alarm_list"},REQUEST_TYPE:{SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",GET_DATA:"get_data",UPDATE_DATA:"update_data",GET_ALARM_LIST:"get_alarm_list",SET_ALARM_LIST:"set_alarm_list"},CONTEXT_MENU_TYPE:{SET:"set",CHANGE:"change",REMOVE:"remove"},LIST_TYPE:{SOUND:0,SPEAKER:1}},window.CONSTANTS.IS_DEV&&(window.CONSTANTS.URL.CONSOLE="http://127.0.0.1:5000")},d86f:function(t,e,n){"use strict";var s=n("ff98"),i=n.n(s);i.a},ddf0:function(t,e,n){},ecf3:function(t,e,n){"use strict";var s=n("64f9"),i=n.n(s);i.a},ff98:function(t,e,n){}});
//# sourceMappingURL=app.77b39aee.js.map